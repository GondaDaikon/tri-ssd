---
id: L2-YYYYMMDD-nnn
kind: foundation
layer: L2
status: active
doc_status: draft
---
<!-- 注: 実際の使用時は /gen-l2 がIDを自動採番します -->

# [プロダクト名] 技術基盤

## 1. ドキュメントの立ち位置

### 1.1 目的

本書は、L1 の要求を満たすための技術基盤（用語・技術選定・アーキテクチャ・NFR）の正本である。
本書の内容が確定した後、phases.md でフェーズ分け・機能一覧を定義する。

### 1.2 粒度

- コードレベルには踏み込まないが、API やモジュール単位までは言及しうる
- 詳細な実装は L3（機能ドキュメント）に委ねる

---

## 2. L1 の要約とトレーサビリティ方針

### 2.1 主要な要求サマリ

| REQ ID | 要求名 | 概要 |
|--------|--------|------|
| REQ-YYYYMMDD-001 | [要求名] | [概要] |
| REQ-YYYYMMDD-002 | [要求名] | [概要] |

### 2.2 トレーサビリティルール

- 各機能（F-YYYYMMDD-nnn）のフロントマターに `req_ids` として対応する REQ を記載
- 各フェーズ（PH-YYYYMMDD-nnn）のフロントマターに `related_nfr_ids` として適用 NF を記載

---

## 3. 用語集

| 用語 | 定義 | 出典 |
|------|------|------|
| [用語1] | [定義] | [REQ-xxxx / 業務資料名] |
| [用語2] | [定義] | [REQ-xxxx / 業務資料名] |
| [用語3] | [定義] | [REQ-xxxx / 業務資料名] |

---

## 4. 技術スタック・技術方針

### 4.1 クライアント側

| 項目 | 選定技術 | 理由 |
|------|---------|------|
| フレームワーク | [例：React] | [選定理由] |
| 状態管理 | [例：Zustand] | [選定理由] |
| UI ライブラリ | [例：Tailwind CSS] | [選定理由] |

### 4.2 サーバ側

| 項目 | 選定技術 | 理由 |
|------|---------|------|
| 言語 | [例：TypeScript] | [選定理由] |
| フレームワーク | [例：Express] | [選定理由] |
| ORM | [例：Prisma] | [選定理由] |

### 4.3 インフラ・その他

| 項目 | 選定技術 | 理由 |
|------|---------|------|
| DB | [例：PostgreSQL] | [選定理由] |
| インフラ | [例：AWS] | [選定理由] |
| CI/CD | [例：GitHub Actions] | [選定理由] |

### 4.4 採用しなかった選択肢

| 候補 | 不採用理由 |
|------|-----------|
| [候補技術1] | [理由] |
| [候補技術2] | [理由] |

---

## 5. 全体アーキテクチャ

### 5.1 コンポーネント構成

```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│   Client    │────▶│   Server    │────▶│  Database   │
│  (Browser)  │     │   (API)     │     │             │
└─────────────┘     └─────────────┘     └─────────────┘
```

### 5.2 レイヤ構造

| レイヤ | 役割 | 主なコンポーネント |
|--------|------|-------------------|
| UI | ユーザーインターフェース | [コンポーネント名] |
| Application | ユースケース制御 | [サービス名] |
| Domain | ビジネスロジック | [エンティティ名] |
| Infrastructure | 外部システム連携 | [リポジトリ名] |

### 5.3 モジュール間の依存関係

- [モジュールA] → [モジュールB]：[依存の理由]
- [モジュールB] → [モジュールC]：[依存の理由]

---

## 6. 非機能要求カタログ

| NF ID | 名称 | 説明 | カテゴリ | 優先度 | 適用範囲 | テスト方法 |
|-------|------|------|---------|--------|----------|-----------|
| NF-YYYYMMDD-001 | レスポンス性能 | 3秒以内に応答 | 性能 | Must | 全機能 | 負荷テスト |
| NF-YYYYMMDD-002 | WCAG AA準拠 | アクセシビリティ基準 | アクセシビリティ | Must | 全機能 | axe DevTools |
| NF-YYYYMMDD-003 | 多言語対応 | 英語・日本語対応 | 国際化 | Should | F-YYYYMMDD-003以降 | i18nテスト |
| NF-YYYYMMDD-004 | データバックアップ | 日次自動バックアップ | 運用性 | Must | 全機能 | バックアップテスト |
| NF-YYYYMMDD-005 | 監査ログ | 操作履歴記録 | コンプライアンス | Could | 管理機能のみ | ログ確認 |

### 優先度の定義

| 優先度 | 説明 |
|--------|------|
| **Must** | 必須。満たさない場合はリリース不可 |
| **Should** | 強く推奨。満たすことが望ましいが、コスト次第で妥協可能 |
| **Could** | あれば良い。余裕があれば実装 |
| **Won't** | 今回は対象外。将来的に検討 |

---

## 7. 次のステップ

本書の内容が確定（`doc_status: reviewed`）したら、以下を実施する：

1. `/gen-phases` でフェーズ定義・機能一覧を生成
2. `/gen-rules` で実装ルールを生成

---

## 8. 更新・変更管理

### 8.1 L1 からの変更要求対応

1. L1 の変更内容を確認
2. 本ドキュメントへの影響を AI で分析
3. 影響箇所を更新し、レビューを依頼

### 8.2 L3 / 実装からのフィードバック

1. L3 または実装で発覚した問題を確認
2. 本ドキュメントへの反映が必要か判断
3. 必要な場合は該当箇所を更新

### 8.3 技術スタック変更時の合意フロー

1. 変更理由と影響範囲を明確化
2. アーキテクト／テックリードがレビュー
3. 重要な変更は PO にも共有
